{% extends "::front.html.twig" %}

{% block title %}
    {{ parent() }}Recherche
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	
	<link rel="stylesheet" href="{{ asset('css/le-frog/jquery-ui-1.10.4.custom.min.css') }}">
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="{{ asset('js/ext/jquery-ui-1.10.4.custom.min.js') }}"></script>
	<script src="{{ asset('js/ideaSearch.js') }}"></script>
	
	<script>
		$(function(){
			$(".ideaSearch").each(function() {
				new wa.IdeaSearch($(this));
			});
		});
	</script>
	
	<script>
		 $(function ()
		 {
		 	function log(message)
		 	{
		 		$("<div>").text(message).prependTo("#log");
		 		$("#log").scrollTop(0);
		 	}
		 	$("#findTagInput").autocomplete(
		 	{
		 		source: function (request, response)
		 		{
		 			$.ajax(
		 			{
		 				url: "{{ path('wa_front_json_autocomplete') }}",
		 				dataType: "jsonp",
						type: 'PSOT',
						data:
		 				{
							text: request.term
		 				},
		 				success: function (data)
		 				{
							console.log(request);
		 					response($.map(data, function (item)
		 					{
		 						return {
		 							label: item,
		 							value: item
		 						}
		 					}));
		 				}
		 			});
		 		},
		 		minLength: 2,
		 		select: function (event, ui)
		 		{
		 			log(ui.item ?
		 				"Selected: " + ui.item.label :
		 				"Nothing selected, input was " + this.value);
		 		},
		 		open: function ()
		 		{
		 			$(this).removeClass("ui-corner-all").addClass("ui-corner-top");
		 		},
		 		close: function ()
		 		{
		 			$(this).removeClass("ui-corner-top").addClass("ui-corner-all");
		 		}
		 	});
		 });
	</script>
{% endblock %}

{% block content %}
    <article class="waBlock">
        <div class="container">
            <h1>TODO</h1>
            <p><a href="https://trello.com/c/sXklkuHw">Liens vers la tâche Trello</a></p>

            <h3>Formulaire d'idée</h3>
			
			<div class="ideaSearch">
				<div class="btn-group disciplines">
					{% for discipline in disciplines %}
						<button data-id="{{ discipline.id }}" type="button" class="btn btn-default {% if loop.index == 1 %}active{% endif %}">{{ discipline.title }}</button>
					{% endfor %}
				</div>
				
				<div class="filterArea">
					<div class="row">
						<div class="col-md-6">
							<p>Thèmes</p>
							
							<div class="themeList">
								{% for theme in themes %}
									<span class="tag greyTag theme" data-id="{{ theme.id }}" data-title="{{ theme.title }}">{{ theme.year }} - {{ theme.week }} | {{ theme.title }}</span>
								{% endfor %}
							</div>
						</div>
						<div class="col-md-6">
							<div>
								<label for="findTagInput">Trouver un tag :</label><br />
								<input type="text" id="findTagInput" />
							</div>
							
							<div>
								<p>Tag(s) sélectionnés :</p>
								
								<div>
									<span class="tag greyTag">Un tag</span>
								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<col-md-6></col-md-6>
						
						<col-md-6>
							<span class="out-bt"><button class="btn btn-primary">Lancer la recherche -&gt;</button></span>
						</col-md-6>
					</div>
				</div>
			</div>
        </div>
    </article>
{% endblock %}
